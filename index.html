<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
    content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>å€’è®¡æ—¶</title>
    
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/jquery-ui.min.css"> 
    
    <script src="js/jquery-1.12.4.min.js"></script>
    <script src="js/jquery-ui.min.js"></script> 
    
    <script src="js/timer.js"></script>
    <script type="text/javascript" src="https://api.lwl12.com/hitokoto/v1?encode=js&charset=utf-8"></script>
    
    <style>
/* =================================================================
 * æ ¸å¿ƒç»“æ„ä¸é€šç”¨æ ·å¼ 
 * ================================================================= */

body {
    overflow-y: auto;
    padding-bottom: 100px;
    transition: background-image 0.5s ease; 
}

#clocks-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    margin-top: 20px;
}

/* å•ä¸ªæ—¶é’Ÿå¡ç‰‡ */
.clock-instance {
    background: rgba(0, 0, 0, 0.25);
    border-radius: 15px;
    padding: 15px 20px;
    margin-bottom: 25px;
    width: 90%;
    max-width: 600px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    border: 1px solid rgba(255, 255, 255, 0.1);
    
    position: relative; 
}

/* =================================================================
 * å€’è®¡æ—¶æ—¶é—´å•å…ƒæ ·å¼ 
 * ================================================================= */

.clock-instance .time-box ul {
    display: flex; 
    justify-content: center;
    flex-wrap: nowrap;
    padding: 0;
    margin: 0 0 15px 0;
}
.clock-instance .time-box li {
    list-style: none;
    margin: 0 10px;
    padding: 0;
    text-align: center;
    min-width: 50px;
}
.clock-instance .time-l { 
    font-size: 36px;
    font-weight: bold;
    display: block;
    color: #fff; 
    line-height: 1.1;
}
.clock-instance .time-s {
    font-size: 14px;
    color: rgba(255, 255, 255, 0.8);
}
.clock-title {
    font-size: 18px;
    font-weight: bold;
    color: #fff;
    padding: 2px 5px;
    border-radius: 5px;
    margin-right: 15px;
    cursor: text; 
    min-width: 50px;
    outline: none;
    user-select: text; 
    -webkit-user-select: text;
}

/* =================================================================
 * å¤´éƒ¨å’ŒæŒ‰é’® 
 * ================================================================= */

.clock-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 15px;
    cursor: grab;
}
.clock-header .clock-title {
    cursor: text !important;
}
.clock-header .clock-title:focus {
    cursor: text !important;
}

.settings-toggle-btn, .minimize-toggle-btn, .delete-clock-btn {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    border: none;
    cursor: pointer;
    line-height: 30px;
    text-align: center;
    transition: all 0.2s;
    font-weight: bold;
    margin-left: 8px; 
    flex-shrink: 0;
}
.settings-toggle-btn, .minimize-toggle-btn {
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
    font-size: 14px;
}
.settings-toggle-btn:hover, .minimize-toggle-btn:hover {
    background: rgba(255, 255, 255, 0.3);
}
.delete-clock-btn {
    background: rgba(255, 0, 0, 0.5);
    color: white;
    font-size: 16px;
}
.delete-clock-btn:hover {
    background: rgba(255, 0, 0, 0.8);
}

/* è®¾ç½®åŒºæ ·å¼ */
.clock-settings {
    margin-bottom: 15px;
    padding-top: 10px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}
.clock-settings label {
    display: block;
    color: rgba(255, 255, 255, 0.8);
    font-size: 13px;
    margin-bottom: 5px;
}
.clock-settings input[type="datetime-local"] {
    width: 100%;
    box-sizing: border-box;
    padding: 8px;
    margin-bottom: 10px;
    border-radius: 5px;
    border: 1px solid rgba(255, 255, 255, 0.3);
    background: rgba(0, 0, 0, 0.3);
    color: #fff;
    font-size: 14px;
}
.clock-settings input[type="datetime-local"]::-webkit-calendar-picker-indicator {
    filter: invert(1);
}

/* æ ‡é¢˜é¢œè‰²é€‰æ‹©å™¨ç»„ */
.title-color-group {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 10px;
}
.title-color-group .color-controls {
    display: flex;
    align-items: center;
    gap: 10px;
}
.title-color-group button {
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
    border: none;
    padding: 5px 10px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 12px;
}
.title-color-group button:hover {
    background: rgba(255, 255, 255, 0.3);
}
.title-color-group input[type="color"] {
    width: 30px;
    height: 30px;
    padding: 0;
    border: none;
    background: none;
    cursor: pointer;
}

/* è¿›åº¦æ¡æ ·å¼ */
.progress-bar-container {
    width: 100%;
    height: 20px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 10px;
    overflow: hidden;
    position: relative;
    border: 1px solid rgba(255, 255, 255, 0.1);
}
.progress-bar-inner {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #4CAF50, #81C784); 
    border-radius: 10px;
    transition: width 0.5s ease-out;
}
.progress-percent-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #fff;
    font-size: 12px;
    font-weight: bold;
    text-shadow: 0 0 3px rgba(0,0,0,0.5);
}


/* =================================================================
 * FAB å®¹å™¨å’ŒæŒ‰é’®æ ·å¼ 
 * ================================================================= */

#fab-container {
    position: fixed;
    bottom: 30px;
    right: 30px;
    display: flex; 
    gap: 15px; 
    align-items: flex-end;
    z-index: 1000; 
    flex-direction: row; 
    justify-content: flex-end;
}

/* é€šç”¨ FAB æ ·å¼ - ç¡®ä¿çƒå½¢ */
.fab-button {
    width: 60px; 
    height: 60px; 
    border-radius: 50%; /* ç¡®ä¿æ˜¯åœ†å½¢ */
    
    /* å±…ä¸­å†…å®¹ */
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1; 
    
    position: static; 
    padding: 0;
    color: white;
    border: none;
    font-size: 32px;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3); 
    /* æ ¸å¿ƒä¿®æ”¹ï¼šç»Ÿä¸€è¿‡æ¸¡æ—¶é—´ä¸º 0.3s å’Œ ease-out æ›²çº¿ */
    transition: all 0.3s ease-out, transform 0.3s ease-out; 
}

/* â˜…â˜…â˜… ç»Ÿä¸€æ‚¬æµ®æ”¾å¤§æ•ˆæœ (ä½¿ç”¨ ease-out) â˜…â˜…â˜… */
.fab-button:hover {
    transform: scale(1.1) !important; 
}

/* æœ€å°åŒ–åçš„æ—¶é’ŸæŒ‰é’®æ ·å¼ */
.minimized-clock-btn {
    /* ç»§æ‰¿é€šç”¨ FAB å°ºå¯¸å’Œå½¢çŠ¶ */
    width: 60px; 
    height: 60px; 
    border-radius: 50%; 
    padding: 0;
    
    /* ç¡®ä¿å†…å®¹å‚ç›´å¸ƒå±€å’Œå¤–è§‚ */
    display: flex;
    flex-direction: column; /* æ ‡é¢˜å’Œç™¾åˆ†æ¯”å‚ç›´å †å  */
    align-items: center;
    justify-content: center;
    
    background: rgba(0, 0, 0, 0.4); 
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.3);
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3); 
    /* æ ¸å¿ƒä¿®æ”¹ï¼šç»Ÿä¸€è¿‡æ¸¡æ—¶é—´ä¸º 0.3s å’Œ ease-out æ›²çº¿ */
    transition: all 0.3s ease-out, transform 0.3s ease-out;
}

/* ç¡®ä¿æœ€å°åŒ–æŒ‰é’®ä¹Ÿæœ‰æ”¾å¤§æ•ˆæœ */
.minimized-clock-btn:hover {
    transform: scale(1.1);
}

/* â˜…â˜…â˜… æœ€å°åŒ–æ ‡é¢˜çœç•¥å·æ ·å¼ â˜…â˜…â˜… */
.minimized-clock-btn .min-title {
    font-size: 10px; 
    max-width: 50px;
    overflow: hidden;
    text-overflow: ellipsis; /* æ ¸å¿ƒï¼šæ˜¾ç¤ºçœç•¥å· */
    white-space: nowrap; /* æ ¸å¿ƒï¼šå¼ºåˆ¶ä¸æ¢è¡Œ */
    margin-top: -5px; 
}
.minimized-clock-btn .min-percent {
    font-size: 16px;
    font-weight: bold;
    line-height: 1.2;
}


/* æ·»åŠ æŒ‰é’®æ ·å¼ (æœ€å³è¾¹) */
#add-clock-btn {
    background: #4CAF50; 
}
#add-clock-btn span {
    font-size: 32px;
    margin: 0;
}

/* å£çº¸åˆ‡æ¢æŒ‰é’®æ ·å¼ (æ¬¡å³è¾¹) */
#wallpaper-btn {
    background: #007bff; 
    font-size: 24px; 
}

/* å…¨å±€è®¾ç½®æŒ‰é’®æ ·å¼ (æ¬¡å·¦è¾¹) */
#settings-fab {
    background: #FF5722; 
    font-size: 24px;
}

/* =================================================================
 * å…¨å±€è®¾ç½®èœå•æ ·å¼ 
 * ================================================================= */
#global-settings-menu {
    position: fixed;
    bottom: 100px;
    right: 30px;
    width: 300px;
    background: rgba(0, 0, 0, 0.7);
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
    z-index: 999;
    color: white;
    display: none; 
}

#global-settings-menu h3 {
    margin-top: 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 10px;
    margin-bottom: 15px;
}

#global-settings-menu .setting-group {
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
}
#global-settings-menu .setting-group:last-child {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
}

#global-settings-menu label {
    display: block;
    font-size: 14px;
    margin-bottom: 8px;
    font-weight: bold;
}

/* ç¡®ä¿è¾“å…¥ç»„å¯¹é½ */
#global-settings-menu select,
#global-settings-menu .color-input-group {
    display: flex;
    align-items: center;
    width: 100%;
}
#global-settings-menu select {
    /* ä¿®å¤ï¼šç¡®ä¿é€‰æ‹©æ¡†æ ·å¼ */
    padding: 8px;
    border-radius: 5px;
    border: 1px solid rgba(255, 255, 255, 0.3);
    background: rgba(255, 255, 255, 0.1);
    color: white;
    font-size: 14px;
    appearance: none; 
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="white"><path d="M7 10l5 5 5-5z"/></svg>');
    background-repeat: no-repeat;
    background-position: right 8px center;
    background-size: 16px;
}
/* ä¿®å¤ï¼šç¡®ä¿é¢œè‰²æ–‡æœ¬æ¡†å æ®å‰©ä½™ç©ºé—´ */
#global-settings-menu input[type="text"] {
    flex-grow: 1;
    padding: 8px;
    border-radius: 5px;
    border: 1px solid rgba(255, 255, 255, 0.3);
    background: rgba(255, 255, 255, 0.1);
    color: white;
    font-size: 14px;
    text-transform: uppercase;
}
#global-settings-menu input[type="color"] {
    margin-left: 10px;
    width: 30px;
    height: 30px;
    padding: 0;
    border: none;
    background: none;
    cursor: pointer;
    flex-shrink: 0;
}

/* æŒ‰é’®ç»„æ ·å¼ */
#global-settings-menu .wallpaper-controls {
    display: flex;
    gap: 10px;
    justify-content: space-between;
}
#global-settings-menu .wallpaper-controls button {
    flex-grow: 1;
    background: #009688;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    transition: background 0.2s;
}
#global-settings-menu .wallpaper-controls button:hover {
    background: #00796b;
}

/* éšè—æ–‡ä»¶è¾“å…¥æ¡† */
#local-wallpaper-input {
    display: none;
}

/* =================================================================
 * å®ŒæˆçŠ¶æ€æ ·å¼ (è®¡æ—¶å®Œæˆæè¾¹å’Œé—ªçƒ)
 * ================================================================= */

/* é—ªçƒåŠ¨ç”»å®šä¹‰ */
@keyframes glow-blink {
    0% {
        box-shadow: 0 0 0px 0px rgba(229, 190, 17, 0.7), 0 0 10px 0px rgba(229, 190, 17, 0.5);
    }
    50% {
        box-shadow: 0 0 0px 0px rgba(229, 190, 17, 0.7), 0 0 15px 3px rgba(229, 190, 17, 1);
    }
    100% {
        box-shadow: 0 0 0px 0px rgba(229, 190, 17, 0.7), 0 0 10px 0px rgba(229, 190, 17, 0.5);
    }
}

/* è®¡æ—¶å™¨å¡ç‰‡å®ŒæˆçŠ¶æ€ */
.clock-instance.completed {
    /* å¼ºåŠ›æè¾¹å’Œé—ªçƒæ•ˆæœ */
    border: 1px solid #E5BE11;
    animation: glow-blink 2s infinite ease-in-out; 
}

/* æœ€å°åŒ–æ‚¬æµ®çƒå®ŒæˆçŠ¶æ€ */
.minimized-clock-btn.completed {
    /* ä½¿ç”¨è·³åŠ¨æ•ˆæœå’Œé‡‘è‰²æè¾¹ */
    border: 3px solid #E5BE11 !important; /* å¼ºåˆ¶æè¾¹ */
    animation: glow-blink 2s infinite ease-in-out; /* é—ªçƒåŠ¨ç”» */
}

    </style>
</head>
<body>
    <div id="container">
        <div id="clocks-container">
            </div>

        <div id="global-settings-menu">
            <h3>å…¨å±€è®¾ç½®</h3>

            <div class="setting-group">
                <label for="fab-color-mode">æ‚¬æµ®çƒèƒŒæ™¯é¢œè‰²æ¨¡å¼:</label>
                <select id="fab-color-mode">
                    <option value="default">åŠé€æ˜é»‘è‰² (é»˜è®¤)</option>
                    <option value="random">éšæœºé¢œè‰²</option>
                    <option value="title">ä½¿ç”¨è®¡æ—¶å™¨æ ‡é¢˜é¢œè‰²</option>
                </select>
            </div>

            <div class="setting-group">
                <label for="time-number-color">å…¨å±€è®¡æ—¶å™¨æ•°å­—é¢œè‰²:</label>
                <div class="color-input-group">
                    <input type="text" id="time-number-color-text" value="#FFFFFF" readonly>
                    <input type="color" id="time-number-color" value="#FFFFFF">
                </div>
            </div>

            <div class="setting-group">
                <label for="progress-bar-color">å…¨å±€è¿›åº¦æ¡é¢œè‰²:</label>
                <div class="color-input-group">
                    <input type="text" id="progress-bar-color-text" value="#4CAF50" readonly>
                    <input type="color" id="progress-bar-color" value="#4CAF50">
                </div>
            </div>

            <div class="setting-group">
                <label>å£çº¸è®¾ç½®:</label>
                <div class="wallpaper-controls">
                    <button id="import-local-wallpaper-btn">å¯¼å…¥æœ¬åœ°å›¾ç‰‡</button>
                    <button id="clear-local-wallpaper-btn" style="background: #D32F2F;">æ¸…é™¤æœ¬åœ°å›¾ç‰‡</button>
                </div>
                <input type="file" id="local-wallpaper-input" accept="image/*">
            </div>

        </div>

        <div id="fab-container"> 
            <button id="settings-fab" class="fab-button bounce animated" title="å…¨å±€è®¾ç½®">
                âš™ï¸
            </button>
            
            <button id="wallpaper-btn" class="fab-button bounce animated" title="éšæœº/æœ¬åœ°å£çº¸åˆ‡æ¢" style="display: none;">
                ğŸ–¼ï¸
            </button>

            <button id="add-clock-btn" class="fab-button bounce animated" title="æ·»åŠ æ–°å€’è®¡æ—¶">
                <span>+</span> 
            </button>
        </div>
    </div>
</body>
</html>